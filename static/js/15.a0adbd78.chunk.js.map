{"version":3,"sources":["utilities/api/endpoints.ts","utilities/api/interactionManager.ts","pages/PassportRedemption/VoucherFront.png","pages/PassportRedemption/VoucherBack.png","pages/PassportRedemption/PassportVoucher.tsx"],"names":["baseUrl","process","sellers","charges","vouchers","passportVouchers","contacts","sponsorSellers","getSellers","lang","a","axios","get","params","locale","localeFromLanguage","getSeller","id","makeSquarePayment","nonce","sellerId","payment","buyer","isDistribution","campaignId","email","name","idempotencyKey","idempotency_key","isSubscribed","is_subscribed","post","is_square","line_items","seller_id","is_distribution","campaign_id","headers","then","res","catch","err","getVoucher","updateVoucher","amount","put","getMerchantGiftCards","secret","filterGAM","filterGAMString","language","getCampaigns","getCampaignsForMerchant","getDistributor","getAllParticipatingSellers","getParticipatingMerchant","getParticipatingMerchantTickets","tickets_secret","page","items","printed","associated","getPassportEmailId","getContactInfo","passportId","createPassportEmailId","instagram","updatePassportInstagram","checkForValidTicket","ticket_id","updateTicketContactId","contact_id","getPassportTickets","getParticipatingSeller","getGiveawayTicketsForContact","contactId","sendRedeemTicketsEmail","getLocationById","locationId","getAllSponsors","getOneSponsor","rewardId","redeemReward","auth_token","tickets","createLyftReward","getLyftReward","redeemToken","token","module","exports","Voucher","useParams","URLSearchParams","useLocation","search","convertToInt","input","parseInt","convertToBool","useState","restaurantName","setRestaurantName","restaurantTickets","setRestaurantTickets","getAllTickets","data","allTickets","useEffect","Page","map","restaurant","idx","Container","Image","src","VoucherImage","ContainerInfo","RestaurantName","className","length","TicketNumber","code","formattedCode","split","splice","join","formatTicketCode","BackImage","styled","div","img"],"mappings":"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","file":"static/js/15.a0adbd78.chunk.js","sourcesContent":["const baseUrl = process.env.REACT_APP_API_ENDPOINT!;\n\nexport const sellers = baseUrl + 'sellers/';\nexport const charges = baseUrl + 'charges';\nexport const vouchers = baseUrl + 'gift_cards/';\nexport const campaigns = baseUrl + 'campaigns/';\nexport const distributors = baseUrl + 'distributors/';\nexport const passportVouchers = baseUrl + 'participating_sellers/';\nexport const contacts = baseUrl + 'contacts/';\nexport const tickets = baseUrl + 'tickets/';\nexport const participatingSellers = baseUrl + 'participating_sellers/';\nexport const sponsorSellers = baseUrl + 'sponsor_sellers/';\nexport const locations = baseUrl + 'locations/';\nexport const lyftRewards = 'lyft_rewards/';\n","import axios from 'axios';\nimport { CardElement } from '@stripe/react-stripe-js';\nimport { Buyer, PaymentParams, SquareLineItems } from './types';\nimport {\n  charges,\n  sellers,\n  vouchers,\n  campaigns,\n  distributors,\n  passportVouchers,\n  contacts,\n  tickets,\n  participatingSellers,\n  sponsorSellers,\n  locations,\n  lyftRewards,\n} from './endpoints';\n\n// Fix return typing\nexport const getSellers = async (lang?: string): Promise<any> => {\n  return await axios.get(sellers, {\n    params: { locale: localeFromLanguage(lang) },\n  });\n};\n\n// Fix return typing\nexport const getSeller = async (id: string, lang?: string): Promise<any> => {\n  return await axios.get(sellers + id, {\n    params: { locale: localeFromLanguage(lang) },\n  });\n};\n\n// TODO(ArtyEmsee): add typing for stripe elements\nexport const makePayment = async (\n  stripe: any,\n  elements: any,\n  payment: PaymentParams,\n  buyer: Buyer\n) => {\n  const { email, name } = buyer;\n\n  // TODO(ArtyEmsee): abstract api call, create global object for headers\n  await axios\n    .post(\n      charges,\n      {\n        is_square: false,\n        line_items: [payment],\n        email: email,\n      },\n      { headers: { 'Access-Control-Allow-Origin': '*' } }\n    )\n    .then(async (res) => {\n      // TODO(ArtyEmsee): fix response to success\n      if (!stripe || !elements) return;\n      else {\n        const cardElement = elements!.getElement(CardElement);\n        const result = await stripe!.confirmCardPayment(\n          `${res.data.client_secret}`,\n          {\n            payment_method: {\n              card: cardElement!,\n              billing_details: {\n                name: name,\n                email: email,\n              },\n            },\n          }\n        );\n\n        if (result.error) {\n          console.log(result.error.message);\n        } else {\n          if (result.paymentIntent?.status === 'succeeded') {\n            console.log(\n              result.paymentIntent?.status,\n              'The payment has been processed!'\n            );\n          }\n        }\n      }\n    });\n\n  // TODO(ArtyEmsee): fix response to error\n};\n\nexport const makeSquarePayment = async (\n  nonce: string,\n  sellerId: string,\n  payment: SquareLineItems,\n  buyer: Buyer,\n  isDistribution: boolean,\n  campaignId?: string\n) => {\n  const { email, name } = buyer;\n  const idempotencyKey = buyer.idempotency_key;\n  const isSubscribed = buyer.is_subscribed;\n\n  return await axios\n    .post(\n      charges,\n      {\n        is_square: true,\n        nonce,\n        line_items: payment,\n        email,\n        name,\n        seller_id: sellerId,\n        idempotency_key: idempotencyKey,\n        is_subscribed: isSubscribed,\n        is_distribution: isDistribution, // TODO: deprecate this in favor of campaignId\n        campaign_id: campaignId,\n      },\n      { headers: { 'Access-Control-Allow-Origin': '*' } }\n    )\n    .then(async (res) => {\n      return res;\n    })\n    .catch((err) => {\n      throw err;\n    });\n};\n\nexport const getVoucher = async (id: string) =>\n  axios\n    .get(vouchers + id)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const updateVoucher = async (id: string, amount: number) =>\n  axios\n    .put(vouchers + id, { amount })\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getMerchantGiftCards = async (\n  seller_id: string,\n  secret: string,\n  filterGAM: boolean = false\n) => {\n  const filterGAMString = filterGAM ? '?filterGAM=true' : ''; // if the key is present at all, filtering will happen\n  return axios\n    .get(sellers + seller_id + '/gift_cards/' + secret + filterGAMString)\n    .then((res) => res); // don't catch error, throw it up the stack\n};\n\nfunction localeFromLanguage(language?: string) {\n  switch (language) {\n    case 'cn':\n      return 'zh-CN';\n    case 'en':\n    default:\n      return 'en';\n  }\n}\n\nexport const getCampaigns = async (): Promise<any> => {\n  return await axios\n    .get(campaigns)\n    .then((res) => res)\n    .catch((err) => err);\n};\n\nexport const getCampaignsForMerchant = async (\n  seller_id: string\n): Promise<any> => {\n  return await axios\n    .get(sellers + seller_id + '/campaigns')\n    .then((res) => res)\n    .catch((err) => err);\n};\n\nexport const getDistributor = async (id: string): Promise<any> => {\n  return await axios\n    .get(distributors + id)\n    .then((res) => res)\n    .catch((err) => err);\n};\n\nexport const getAllParticipatingSellers = async (): Promise<any> =>\n  axios\n    .get(passportVouchers)\n    .then((res) => res)\n    .catch((err) => err);\n\n// for passport crawl voucher print outs\nexport const getParticipatingMerchant = async (id: string) =>\n  axios\n    .get(passportVouchers + id)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getParticipatingMerchantTickets = async (\n  id: string,\n  tickets_secret: string,\n  page: number | null,\n  items: number | null,\n  printed: boolean | null,\n  associated: boolean | null\n) =>\n  axios\n    .get(passportVouchers + id + '/tickets/' + tickets_secret, {\n      params: { page, items, printed, associated },\n    })\n    .then((res) => res)\n    .catch((err) => err);\n\n// validate passport email\nexport const getPassportEmailId = async (email: string) =>\n  axios\n    .get(contacts, {\n      params: { email },\n    })\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getContactInfo = async (passportId: string) =>\n  axios\n    .get(contacts + passportId)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const createPassportEmailId = async (\n  email: string,\n  instagram: string\n) => {\n  let params = {};\n\n  if (instagram) params = { email, instagram };\n  else params = { email };\n\n  return axios\n    .post(contacts, params)\n    .then((res) => res)\n    .catch((err) => err);\n};\n\nexport const updatePassportInstagram = async (\n  id: string,\n  instagram: string\n) => {\n  return axios\n    .put(contacts + id, { instagram })\n    .then((res) => res)\n    .catch((err) => err);\n};\n\nexport const checkForValidTicket = async (ticket_id: string) =>\n  axios\n    .get(tickets + ticket_id)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const updateTicketContactId = async (\n  ticket_id: string,\n  contact_id: string\n) =>\n  axios\n    .put(tickets + ticket_id, { contact_id })\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getPassportTickets = async (passportId: string) =>\n  axios\n    .get(contacts + passportId + '/tickets')\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getParticipatingSeller = async (sellerId: string) =>\n  axios\n    .get(participatingSellers + sellerId)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getGiveawayTicketsForContact = async (contactId: string) =>\n  axios\n    .get(contacts + contactId)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const sendRedeemTicketsEmail = async (passportId: string) =>\n  axios\n    .post(contacts + passportId + '/rewards')\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getLocationById = async (locationId: number) =>\n  axios\n    .get(locations + locationId)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getAllSponsors = async () =>\n  axios\n    .get(sponsorSellers)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getOneSponsor = async (rewardId: number) =>\n  axios\n    .get(sponsorSellers + rewardId)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const redeemReward = async (\n  contact_id: number,\n  auth_token: string,\n  tickets: Array<any>\n) =>\n  axios\n    .put(contacts + contact_id + '/tickets/' + auth_token, { tickets })\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const createLyftReward = async (contact_id: number) =>\n  axios\n    .post(contacts + contact_id + '/' + lyftRewards)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getLyftReward = async (contact_id: number) =>\n  axios\n    .get(contacts + contact_id + '/' + lyftRewards)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const redeemToken = async (contact_id: number, token: string) =>\n  axios\n    .post(contacts + contact_id + '/' + lyftRewards + token + '/redeem/')\n    .then((res) => res)\n    .catch((err) => err);\n","module.exports = __webpack_public_path__ + \"static/media/VoucherFront.17e749a1.png\";","module.exports = __webpack_public_path__ + \"static/media/VoucherBack.53dab2f2.png\";","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { useParams } from 'react-router-dom';\n\nimport {\n  getParticipatingMerchant,\n  getParticipatingMerchantTickets,\n} from '../../utilities/api/interactionManager';\nimport { useLocation } from 'react-router-dom';\nimport { LoaderFillerContainer } from '../../components/Loader';\nimport VoucherImage from './VoucherFront.png';\nimport BackImage from './VoucherBack.png';\n\nconst Voucher = () => {\n  const { id, tickets_secret } = useParams();\n  let params = new URLSearchParams(useLocation().search);\n\n  const convertToInt = (input: string | null) => {\n    if (input === null) { return null };\n    const num = parseInt(input, 10);\n    return num;\n  };\n\n  const convertToBool = (input: string | null) => {\n    if (input === 'true') { return true };\n    if (input === 'false') { return false };\n    return null;\n  };\n\n  const page = convertToInt(params.get('page'));\n  const items = convertToInt(params.get('items'));\n  const printed = convertToBool(params.get('printed'));\n  const associated = convertToBool(params.get('associated'));\n\n  const [restaurantName, setRestaurantName] = useState('');\n  const [restaurantTickets, setRestaurantTickets] = useState<any | null>();\n\n  const getAllTickets = async () => {\n    const {\n      data: { name },\n    } = await getParticipatingMerchant(id);\n    const { data: allTickets } = await getParticipatingMerchantTickets(\n      id,\n      tickets_secret,\n      page,\n      items,\n      printed,\n      associated\n    );\n\n    if (allTickets && name) {\n      setRestaurantName(name);\n      setRestaurantTickets(allTickets);\n    }\n  };\n\n  useEffect(() => {\n    getAllTickets();\n  });\n\n  const formatTicketCode = (code) => {\n    const formattedCode = code.split('');\n    formattedCode.splice(3, 0, '-');\n    return formattedCode.join('');\n  };\n\n  return restaurantTickets ? (\n    <Page>\n      {restaurantTickets.map((restaurant, idx) => (\n        <>\n          <Container>\n            <Image src={VoucherImage} />\n            <ContainerInfo>\n              <RestaurantName\n                className={restaurantName.length > 15 ? 'long' : ''}\n              >\n                {restaurantName}\n              </RestaurantName>\n              <TicketNumber>\n                {formatTicketCode(restaurant.ticket_id)}\n              </TicketNumber>\n            </ContainerInfo>\n          </Container>\n          {(idx + 1) % 4 === 0 && (\n            <>\n              <Image src={BackImage} />\n              <Image src={BackImage} />\n              <Image src={BackImage} />\n              <Image src={BackImage} />\n            </>\n          )}\n        </>\n      ))}\n    </Page>\n  ) : (\n    <LoaderFillerContainer />\n  );\n};\n\nexport default Voucher;\n\nconst Page = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`;\n\nconst Container = styled.div`\n  height: 599px;\n  width: 775px;\n  display: grid;\n  grid-template-rows: 1fr;\n`;\n\nconst Image = styled.img`\n  height: 599px;\n  width: 775px;\n  grid-row: 1;\n  grid-column: 1;\n`;\n\nconst ContainerInfo = styled.div`\n  grid-row: 1;\n  grid-column: 1;\n  height: 599px;\n  width: 775px;\n  display: flex;\n  z-index: 5;\n`;\n\nconst RestaurantName = styled.div`\n  font-family: 'Nova Mono';\n  text-transform: uppercase;\n  color: #bc4f5e;\n\n  transform: rotate(15deg);\n  -webkit-transform: rotate(15deg);\n  -moz-transform: rotate(15deg);\n  -ms-transform: rotate(15deg);\n  -o-transform: rotate(15deg);\n\n  margin-top: 317px;\n  margin-left: 100px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n\n  width: 150px;\n  height: 25px;\n  padding: 0;\n\n  &.long {\n    margin-top: 312px;\n    font-size: 12px;\n    height: 35px;\n  }\n`;\n\nconst TicketNumber = styled.div`\n  color: #a8192e;\n  font-weight: bold;\n  font-style: italic;\n  font-size: 50px;\n  margin: 160px 0 0 210px;\n\n  width: 285px;\n  text-align: center;\n`;\n"],"sourceRoot":""}