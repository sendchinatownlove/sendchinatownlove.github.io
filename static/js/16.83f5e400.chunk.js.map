{"version":3,"sources":["utilities/api/endpoints.ts","utilities/api/interactionManager.ts","images/404-error-image.png","components/404Page/ErrorPage.tsx","pages/MerchantVoucherDashboard/styles.module.scss","pages/MerchantVoucherDashboard/Banners.tsx","pages/MerchantVoucherDashboard/utils.ts","pages/MerchantVoucherDashboard/VoucherTable.tsx","pages/MerchantVoucherDashboard/VoucherDashboard.tsx","pages/MerchantVoucherDashboard/MerchantVoucherDashboard.tsx"],"names":["baseUrl","process","sellers","charges","vouchers","passportVouchers","contacts","sponsorSellers","getSellers","lang","a","axios","get","params","locale","localeFromLanguage","getSeller","id","getSellerHours","getSellerDeliveryOptions","makeSquarePayment","nonce","sellerId","payment","buyer","isDistribution","campaignId","email","name","idempotencyKey","idempotency_key","isSubscribed","is_subscribed","post","is_square","line_items","seller_id","is_distribution","campaign_id","headers","then","res","catch","err","getVoucher","updateVoucher","amount","put","getMerchantGiftCards","secret","filterGAM","filterGAMString","language","getCampaigns","getCampaignsForMerchant","getDistributor","getFiscalSponsor","getAllParticipatingSellers","getParticipatingMerchant","getParticipatingMerchantTickets","tickets_secret","page","items","printed","associated","getPassportEmailId","getContactInfo","passportId","createPassportEmailId","instagram","updatePassportInstagram","checkForValidTicket","ticket_id","updateTicketContactId","contact_id","getPassportTickets","getParticipatingSeller","getGiveawayTicketsForContact","contactId","sendRedeemTicketsEmail","getLocationById","locationId","getAllSponsors","getOneSponsor","rewardId","redeemReward","auth_token","tickets","createLyftReward","getLyftReward","redeemToken","token","module","exports","ErrorPage","props","Container","Text","menuOpen","Error","src","ErrorImage","alt","MainHeader","SubHeader","BackToHome","href","styled","main","img","div","ERROR_TYPE","ERROR_COPY_ENGLISH","GENERIC","VALIDATION","ERROR_COPY_CHINESE","SuccessfulSaveBanner","className","classNames","styles","banner","successfulSaveBanner","successfulSaveIconContainer","SaveErrorBanner","errorType","saveErrorBanner","errorIconContainer","formatCentsAmount","cents","Intl","NumberFormat","style","currency","minimumFractionDigits","format","FilterableTable","require","renderDate","date","moment","centsToDollarString","String","hasBeenUsed","record","latest_value","original_value","VoucherTable","fetchData","giftCards","setErrorType","setShowSuccessBanner","showPrintView","useState","editingGiftCard","setEditingGiftCard","latestValue","setLatestValue","useEffect","tableRef","useRef","current","updatePageSize","target","value","onSave","useCallback","giftCardId","latestValueCents","parseFloat","message","includes","fields","displayName","sortable","thClassName","tdClassName","render","greyBox","input","seller_gift_card_id","editCell","editIconContainer","onClick","onSelectCell","classes","root","editIcon","single_use","originalValueString","voucherUsed","markUsedContainer","Checkbox","checked","markedUsed","colorSecondary","onChange","markUsedLabel","TextField","InputProps","startAdornment","InputAdornment","position","event","variant","editEndingBalance","Button","saveButton","gift_card_id","endingBalance","bottomPagerVisible","tableContainer","data","headerVisible","initialSort","namespace","noFilteredRecordsMessage","noRecordsMessage","pageSizes","recordCountName","recordCountNamePlural","ref","topPagerVisible","LoadingButton","icon","text","loading","setLoading","click","Icon","loadingButton","loadingButtonIcon","Loader","size","loadingText","StatsSection","subtitle","title","statsTitle","statsSubtitle","VoucherDashboard","handlePrint","organizationName","searchFilter","setSearchFilter","filterGam","setFilterGam","showSuccessBanner","setTimeout","stats","useMemo","filter","card","length","reduce","total","curr","filteredGiftCards","giftCard","filterableFields","lowercaseSearch","toLowerCase","i","indexOf","header","headerTitle","headerSubtitle","actionButtons","RefreshIcon","PrintIcon","map","section","key","contentContainer","filterSection","searchBar","searchIcon","InputBase","searchText","inputProps","placeholder","filterGamContainer","checkbox","filterGamSelected","filterGamText","MerchantVoucherDashboard","error","setError","pageLoading","setPageLoading","seller","setSeller","setGiftCards","printRef","setShowPrintView","useReactToPrint","content","onAfterPrint","print","urlParams","useHistory","location","pathname","match","param","replace","secretId","sellerResponse","giftCardResponse","onPageLoad","isPage"],"mappings":"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","file":"static/js/16.83f5e400.chunk.js","sourcesContent":["const baseUrl = process.env.REACT_APP_API_ENDPOINT!;\n\nexport const sellers = baseUrl + 'sellers/';\nexport const charges = baseUrl + 'charges';\nexport const vouchers = baseUrl + 'gift_cards/';\nexport const campaigns = baseUrl + 'campaigns/';\nexport const distributors = baseUrl + 'distributors/';\nexport const nonprofits = baseUrl + 'nonprofits/';\nexport const passportVouchers = baseUrl + 'participating_sellers/';\nexport const contacts = baseUrl + 'contacts/';\nexport const tickets = baseUrl + 'tickets/';\nexport const participatingSellers = baseUrl + 'participating_sellers/';\nexport const sponsorSellers = baseUrl + 'sponsor_sellers/';\nexport const locations = baseUrl + 'locations/';\nexport const lyftRewards = 'lyft_rewards/';\n","import axios from 'axios';\nimport { CardElement } from '@stripe/react-stripe-js';\nimport { Buyer, PaymentParams, SquareLineItems } from './types';\nimport {\n  charges,\n  sellers,\n  vouchers,\n  campaigns,\n  distributors,\n  passportVouchers,\n  contacts,\n  tickets,\n  participatingSellers,\n  sponsorSellers,\n  locations,\n  lyftRewards,\n  nonprofits,\n} from './endpoints';\n\n// Fix return typing\nexport const getSellers = async (lang?: string): Promise<any> => {\n  return await axios.get(sellers, {\n    params: { locale: localeFromLanguage(lang) },\n  });\n};\n\nexport const getSeller = async (id: string, lang?: string): Promise<any> => {\n  return await axios.get(sellers + id, {\n    params: { locale: localeFromLanguage(lang) },\n  });\n};\n\nexport const getSellerHours = async (id: string): Promise<any> => {\n  return await axios.get(sellers + id + '/open_hour');\n};\n\nexport const getSellerDeliveryOptions = async (id: string): Promise<any> => {\n  return await axios.get(sellers + id + '/delivery_options');\n};\n\n// TODO(ArtyEmsee): add typing for stripe elements\nexport const makePayment = async (\n  stripe: any,\n  elements: any,\n  payment: PaymentParams,\n  buyer: Buyer\n) => {\n  const { email, name } = buyer;\n\n  // TODO(ArtyEmsee): abstract api call, create global object for headers\n  await axios\n    .post(\n      charges,\n      {\n        is_square: false,\n        line_items: [payment],\n        email: email,\n      },\n      { headers: { 'Access-Control-Allow-Origin': '*' } }\n    )\n    .then(async (res) => {\n      // TODO(ArtyEmsee): fix response to success\n      if (!stripe || !elements) return;\n      else {\n        const cardElement = elements!.getElement(CardElement);\n        const result = await stripe!.confirmCardPayment(\n          `${res.data.client_secret}`,\n          {\n            payment_method: {\n              card: cardElement!,\n              billing_details: {\n                name: name,\n                email: email,\n              },\n            },\n          }\n        );\n\n        if (result.error) {\n          console.log(result.error.message);\n        } else {\n          if (result.paymentIntent?.status === 'succeeded') {\n            console.log(\n              result.paymentIntent?.status,\n              'The payment has been processed!'\n            );\n          }\n        }\n      }\n    });\n\n  // TODO(ArtyEmsee): fix response to error\n};\n\nexport const makeSquarePayment = async (\n  nonce: string,\n  sellerId: string,\n  payment: SquareLineItems,\n  buyer: Buyer,\n  isDistribution: boolean,\n  campaignId?: string\n) => {\n  const { email, name } = buyer;\n  const idempotencyKey = buyer.idempotency_key;\n  const isSubscribed = buyer.is_subscribed;\n\n  return await axios\n    .post(\n      charges,\n      {\n        is_square: true,\n        nonce,\n        line_items: payment,\n        email,\n        name,\n        seller_id: sellerId,\n        idempotency_key: idempotencyKey,\n        is_subscribed: isSubscribed,\n        is_distribution: isDistribution, // TODO: deprecate this in favor of campaignId\n        campaign_id: campaignId,\n      },\n      { headers: { 'Access-Control-Allow-Origin': '*' } }\n    )\n    .then(async (res) => {\n      return res;\n    })\n    .catch((err) => {\n      throw err;\n    });\n};\n\nexport const getVoucher = async (id: string) =>\n  axios\n    .get(vouchers + id)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const updateVoucher = async (id: string, amount: number) =>\n  axios\n    .put(vouchers + id, { amount })\n    .then((res) => res)\n    .catch((err) => {\n      throw err;\n    });\n\nexport const getMerchantGiftCards = async (\n  seller_id: string,\n  secret: string,\n  filterGAM: boolean = false\n) => {\n  const filterGAMString = filterGAM ? '?filterGAM=true' : ''; // if the key is present at all, filtering will happen\n  return axios\n    .get(sellers + seller_id + '/gift_cards/' + secret + filterGAMString)\n    .then((res) => res); // don't catch error, throw it up the stack\n};\n\nfunction localeFromLanguage(language?: string) {\n  switch (language) {\n    case 'cn':\n      return 'zh-CN';\n    case 'en':\n    default:\n      return 'en';\n  }\n}\n\nexport const getCampaigns = async (): Promise<any> => {\n  return await axios\n    .get(campaigns)\n    .then((res) => res)\n    .catch((err) => err);\n};\n\nexport const getCampaignsForMerchant = async (\n  seller_id: string\n): Promise<any> => {\n  return await axios\n    .get(sellers + seller_id + '/campaigns')\n    .then((res) => res)\n    .catch((err) => err);\n};\n\nexport const getDistributor = async (id: string): Promise<any> => {\n  return await axios\n    .get(distributors + id)\n    .then((res) => res)\n    .catch((err) => err);\n};\n\nexport const getFiscalSponsor = async (id: string): Promise<any> => {\n  return await axios\n    .get(nonprofits + id)\n    .then((res) => res)\n    .catch((err) => err);\n};\n\nexport const getAllParticipatingSellers = async (): Promise<any> =>\n  axios\n    .get(passportVouchers)\n    .then((res) => res)\n    .catch((err) => err);\n\n// for passport crawl voucher print outs\nexport const getParticipatingMerchant = async (id: string) =>\n  axios\n    .get(passportVouchers + id)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getParticipatingMerchantTickets = async (\n  id: string,\n  tickets_secret: string,\n  page: number | null,\n  items: number | null,\n  printed: boolean | null,\n  associated: boolean | null\n) =>\n  axios\n    .get(passportVouchers + id + '/tickets/' + tickets_secret, {\n      params: { page, items, printed, associated },\n    })\n    .then((res) => res)\n    .catch((err) => err);\n\n// validate passport email\nexport const getPassportEmailId = async (email: string) =>\n  axios\n    .get(contacts, {\n      params: { email },\n    })\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getContactInfo = async (passportId: string) =>\n  axios\n    .get(contacts + passportId)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const createPassportEmailId = async (\n  email: string,\n  instagram: string\n) => {\n  let params = {};\n\n  if (instagram) params = { email, instagram };\n  else params = { email };\n\n  return axios\n    .post(contacts, params)\n    .then((res) => res)\n    .catch((err) => err);\n};\n\nexport const updatePassportInstagram = async (\n  id: string,\n  instagram: string\n) => {\n  return axios\n    .put(contacts + id, { instagram })\n    .then((res) => res)\n    .catch((err) => err);\n};\n\nexport const checkForValidTicket = async (ticket_id: string) =>\n  axios\n    .get(tickets + ticket_id)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const updateTicketContactId = async (\n  ticket_id: string,\n  contact_id: string\n) =>\n  axios\n    .put(tickets + ticket_id, { contact_id })\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getPassportTickets = async (passportId: string) =>\n  axios\n    .get(contacts + passportId + '/tickets')\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getParticipatingSeller = async (sellerId: string) =>\n  axios\n    .get(participatingSellers + sellerId)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getGiveawayTicketsForContact = async (contactId: string) =>\n  axios\n    .get(contacts + contactId)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const sendRedeemTicketsEmail = async (passportId: string) =>\n  axios\n    .post(contacts + passportId + '/rewards')\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getLocationById = async (locationId: number) =>\n  axios\n    .get(locations + locationId)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getAllSponsors = async () =>\n  axios\n    .get(sponsorSellers)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getOneSponsor = async (rewardId: number) =>\n  axios\n    .get(sponsorSellers + rewardId)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const redeemReward = async (\n  contact_id: number,\n  auth_token: string,\n  tickets: Array<any>\n) =>\n  axios\n    .put(contacts + contact_id + '/tickets/' + auth_token, { tickets })\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const createLyftReward = async (contact_id: number) =>\n  axios\n    .post(contacts + contact_id + '/' + lyftRewards)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getLyftReward = async (contact_id: number) =>\n  axios\n    .get(contacts + contact_id + '/' + lyftRewards)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const redeemToken = async (contact_id: number, token: string) =>\n  axios\n    .post(contacts + contact_id + '/' + lyftRewards + token + '/redeem/')\n    .then((res) => res)\n    .catch((err) => err);\n","module.exports = __webpack_public_path__ + \"static/media/404-error-image.f72ee016.png\";","import React from 'react';\nimport styled from 'styled-components';\nimport ErrorImage from '../../images/404-error-image.png';\n\ninterface CompactProps {\n  menuOpen: boolean;\n}\n\nconst ErrorPage = (props: CompactProps) => {\n  return (\n    <Container>\n      <Text menuOpen={props.menuOpen}>\n        <Error src={ErrorImage} alt=\"error\" />\n        <MainHeader> Sorry Your Dumpling Was Not Found! </MainHeader>\n        <SubHeader>\n          {' '}\n          The page you are trying does not exist or has been moved.\n        </SubHeader>\n        <SubHeader>Please try going back to the homepage.</SubHeader>\n        <BackToHome>\n          <a href=\"https://sendchinatownlove.com/\">GO TO HOMEPAGE</a>\n        </BackToHome>\n      </Text>\n    </Container>\n  );\n};\n\nexport default ErrorPage;\n\nconst Container = styled.main`\n  font-family: futura;\n  background-color: #ffffff;\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n`;\n\nconst Error = styled.img`\n  width: 80%;\n  max-width: 480px;\n  margin: 0 auto;\n`;\n\nconst Text = styled.div`\n  margin: 0 auto;\n  width: 80%;\n  text-align: center;\n  display: ${(props: CompactProps) => (props.menuOpen ? 'none' : 'flex')};\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  flex: 1;\n`;\n\nconst MainHeader = styled.div`\n  font-weight: 600;\n`;\nconst SubHeader = styled.div`\n  font-weight: 400;\n  margin: 0.2rem auto;\n`;\nconst BackToHome = styled.div`\n  font-weight: 450;\n  font-size: 1rem;\n  a {\n    color: #a7182d;\n  }\n`;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button--filled\":\"styles_button--filled__3g-mZ\",\"button--red-filled\":\"styles_button--red-filled__2hfQJ\",\"button--outlined\":\"styles_button--outlined__1u9dK\",\"button--redfilled\":\"styles_button--redfilled__1v7Uq\",\"button--red-outlined\":\"styles_button--red-outlined__dPBz_\",\"modalButton--back\":\"styles_modalButton--back__3fUEz\",\"modalButton--outlined\":\"styles_modalButton--outlined__32v29\",\"modalButton--filled\":\"styles_modalButton--filled__UrmGO\",\"modalButton--nonfunctional\":\"styles_modalButton--nonfunctional__22Qm-\",\"modalButton--selected\":\"styles_modalButton--selected__1JgjQ\",\"modalButton--outline\":\"styles_modalButton--outline__2dPxe\",\"closeButton--close\":\"styles_closeButton--close__2HmZM\",\"modalForm--form\":\"styles_modalForm--form__3yk9T\",\"modalInput--input\":\"styles_modalInput--input__3ZDiJ\",\"filterable-table-container\":\"styles_filterable-table-container__3Djf-\",\"header-row\":\"styles_header-row__1GHCT\",\"filter-container\":\"styles_filter-container__1DUSK\",\"filter-input\":\"styles_filter-input__ir8Rf\",\"clear-filter\":\"styles_clear-filter__2EGMJ\",\"record-count\":\"styles_record-count__1zy20\",\"table\":\"styles_table__3cZ9F\",\"fa\":\"styles_fa__upKlt\",\"table-email-header\":\"styles_table-email-header__nglnm\",\"table-email-container\":\"styles_table-email-container__2ghpD\",\"active\":\"styles_active__2qlTg\",\"disabled\":\"styles_disabled__2Bs57\",\"header\":\"styles_header__QrHY9\",\"headerTitle\":\"styles_headerTitle__3yFl5\",\"headerSubtitle\":\"styles_headerSubtitle__3aYur\",\"actionButtons\":\"styles_actionButtons__2EoxA\",\"loadingButton\":\"styles_loadingButton__2Yk5f\",\"loadingButtonIcon\":\"styles_loadingButtonIcon__35MfM\",\"loadingText\":\"styles_loadingText__2DNGZ\",\"stats\":\"styles_stats__3TsVS\",\"statsTitle\":\"styles_statsTitle__14SIx\",\"statsSubtitle\":\"styles_statsSubtitle__dfpnF\",\"banner\":\"styles_banner__hj7r8\",\"successfulSaveBanner\":\"styles_successfulSaveBanner__4pj31\",\"successfulSaveIconContainer\":\"styles_successfulSaveIconContainer__3ilmQ\",\"saveErrorBanner\":\"styles_saveErrorBanner__3vS3m\",\"errorIconContainer\":\"styles_errorIconContainer__JnN1_\",\"contentContainer\":\"styles_contentContainer__r5zQQ\",\"filterSection\":\"styles_filterSection__2T1LG\",\"searchBar\":\"styles_searchBar__1yGUh\",\"searchIcon\":\"styles_searchIcon__yrkfx\",\"searchText\":\"styles_searchText__2Zn_X\",\"filterGamContainer\":\"styles_filterGamContainer__27z46\",\"checkbox\":\"styles_checkbox__1ZGKZ\",\"filterGamText\":\"styles_filterGamText__rYNR4\",\"filterGamSelected\":\"styles_filterGamSelected__CQXLa\",\"tableContainer\":\"styles_tableContainer__1Pk15\",\"editCell\":\"styles_editCell__3WB4f\",\"editIconContainer\":\"styles_editIconContainer__GvQb2\",\"editIcon\":\"styles_editIcon__2SEYC\",\"endingBalance\":\"styles_endingBalance__2QSKr\",\"editEndingBalance\":\"styles_editEndingBalance__1g-0x\",\"saveButton\":\"styles_saveButton__ZOO_5\",\"markUsedContainer\":\"styles_markUsedContainer__Tzt5h\",\"markUsedLabel\":\"styles_markUsedLabel__2xL0l\",\"markedUsed\":\"styles_markedUsed__19cm7\",\"greyBox\":\"styles_greyBox__1ro3M\"};","import classNames from 'classnames';\nimport React from 'react';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport ErrorIcon from '@material-ui/icons/Error';\n\nimport styles from './styles.module.scss';\n\nexport const ERROR_TYPE = {\n  GENERIC: 'GENERIC',\n  VALIDATION: 'VALIDATION',\n};\n\ntype ErrorTypeKeys = keyof typeof ERROR_TYPE;\nexport type ErrorTypeValues = typeof ERROR_TYPE[ErrorTypeKeys];\n\nconst ERROR_COPY_ENGLISH = {\n  GENERIC:\n    'There was an error saving your changes. Please refresh your page and try again.',\n  /**\n   * Right now, the only validation error we have on the update voucher endpoint\n   * is if the amount is higher than the current voucher value.\n   */\n  VALIDATION:\n    'The ending balance entered is higher than the current voucher balance. Please enter a value the same or lower than the current balance before saving.',\n};\n\nconst ERROR_COPY_CHINESE = {\n  GENERIC: '编辑储存错误。请刷新页面并重新储存。',\n  VALIDATION:\n    '输入的结余大于礼品券可用金额。请输入等于或小于礼品券可用金额并重新储存。',\n};\n\nexport const SuccessfulSaveBanner = () => (\n  <div className={classNames(styles.banner, styles.successfulSaveBanner)}>\n    <div className={styles.successfulSaveIconContainer}>\n      <CheckCircleIcon />\n    </div>\n    Your changes have been saved. 编辑已储存。\n  </div>\n);\n\nexport const SaveErrorBanner = ({\n  errorType,\n}: {\n  errorType: ErrorTypeValues;\n}) => (\n  <div className={classNames(styles.banner, styles.saveErrorBanner)}>\n    <div className={styles.errorIconContainer}>\n      <ErrorIcon />\n    </div>\n    {ERROR_COPY_ENGLISH[errorType]}\n    <br />\n    {ERROR_COPY_CHINESE[errorType]}\n  </div>\n);\n","export const formatCentsAmount = (cents: number) => {\n  return Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    minimumFractionDigits: 2,\n  }).format(cents / 100);\n};\n","import classNames from 'classnames';\nimport moment from 'moment';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\n\nimport Button from '@material-ui/core/Button';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport TextField from '@material-ui/core/TextField';\nimport EditIcon from '@material-ui/icons/Edit';\n\nimport { ERROR_TYPE } from './Banners';\nimport type { ErrorTypeValues } from './Banners';\nimport { formatCentsAmount } from './utils';\nimport { updateVoucher } from '../../utilities/api/interactionManager';\nimport type { GiftCardDetails } from '../../utilities/api/types';\n\nimport styles from './styles.module.scss';\n\nconst FilterableTable = require('react-filterable-table');\n\nconst renderDate = (date: string) => moment(date).format('YYYY-MM-DD');\nconst centsToDollarString = (cents: number) => String(cents / 100);\n\n// Determine if the gift card latest and original values are different\n// (aka it's been used).\nconst hasBeenUsed = (record: GiftCardDetails) =>\n  record.latest_value !== record.original_value;\n\nconst VoucherTable = ({\n  fetchData,\n  giftCards,\n  setErrorType,\n  setShowSuccessBanner,\n  showPrintView,\n}: {\n  fetchData: () => void;\n  giftCards: GiftCardDetails[];\n  setErrorType: (type: ErrorTypeValues | null) => void;\n  setShowSuccessBanner: (showSuccessBanner: boolean) => void;\n  showPrintView: boolean;\n}) => {\n  const [\n    editingGiftCard,\n    setEditingGiftCard,\n  ] = useState<GiftCardDetails | null>(null);\n  const [latestValue, setLatestValue] = useState<string>('');\n\n  useEffect(() => {\n    // Reset error banner after selected row changes.\n    setErrorType(null);\n\n    if (!editingGiftCard) {\n      setLatestValue('');\n    }\n  }, [editingGiftCard, setErrorType]);\n\n  const tableRef = useRef();\n  useEffect(() => {\n    // This is very hacky but we need it to force the table to re-render\n    // when we print. react-filterable-table only updates page size on\n    // component mount or when an internal .updatePageSize method is\n    // called. See below for details:\n    // https://github.com/ianwitherow/react-filterable-table/blob/master/src/Components/FilterableTable.jsx#L23\n    // https://github.com/ianwitherow/react-filterable-table/blob/master/src/Components/FilterableTable.jsx#L224\n    if (showPrintView) {\n      (tableRef?.current as any).updatePageSize({ target: { value: 1000 } });\n    } else {\n      (tableRef?.current as any).updatePageSize({ target: { value: 20 } });\n    }\n  }, [showPrintView]);\n\n  const onSave = useCallback(\n    async (giftCardId: string) => {\n      const latestValueCents = parseFloat(latestValue) * 100;\n\n      if (latestValueCents === editingGiftCard?.latest_value) {\n        setEditingGiftCard(null);\n        return;\n      }\n\n      try {\n        await updateVoucher(giftCardId, latestValueCents);\n        fetchData();\n        setEditingGiftCard(null);\n        setErrorType(null);\n        setShowSuccessBanner(true);\n      } catch (error) {\n        if (error.message.includes('422')) {\n          setErrorType(ERROR_TYPE.VALIDATION);\n        } else {\n          setErrorType(ERROR_TYPE.GENERIC);\n        }\n      }\n    },\n    [\n      editingGiftCard,\n      fetchData,\n      latestValue,\n      setErrorType,\n      setShowSuccessBanner,\n    ]\n  );\n\n  const renderLatestValue = ({ record, value }: FTRenderProps) => {\n    if (showPrintView && !hasBeenUsed(record)) {\n      return <div className={styles.greyBox} />;\n    } else if (\n      record.seller_gift_card_id !== editingGiftCard?.seller_gift_card_id\n    ) {\n      const onSelectCell = (record: GiftCardDetails) => {\n        // This has to be a string because the onChange event below outputs a\n        // string value.\n        setLatestValue(centsToDollarString(record.latest_value));\n        setEditingGiftCard(record);\n      };\n\n      return (\n        <div className={styles.editCell}>\n          {formatCentsAmount(value)}\n          <div\n            className={styles.editIconContainer}\n            onClick={() => onSelectCell(record)}\n          >\n            {!showPrintView && record.latest_value !== 0 && (\n              <EditIcon classes={{ root: styles.editIcon }} />\n            )}\n          </div>\n        </div>\n      );\n    }\n\n    let input;\n    if (record.single_use) {\n      // Single use vouchers should be used in full amount.\n      const originalValueString = centsToDollarString(record.original_value);\n      const voucherUsed = latestValue !== originalValueString;\n      input = (\n        <div className={styles.markUsedContainer}>\n          <Checkbox\n            checked={voucherUsed}\n            classes={{\n              checked: voucherUsed ? styles.markedUsed : '',\n              colorSecondary: voucherUsed ? styles.markedUsed : '',\n            }}\n            onChange={() =>\n              voucherUsed\n                ? setLatestValue(originalValueString)\n                : setLatestValue(String(0))\n            }\n          />\n          <div\n            className={classNames({\n              [styles.markUsedLabel]: true,\n              [styles.markedUsed]: voucherUsed,\n            })}\n          >\n            Mark as used\n            <br />\n            标记为已使用\n          </div>\n        </div>\n      );\n    } else {\n      input = (\n        <TextField\n          InputProps={{\n            startAdornment: <InputAdornment position=\"start\">$</InputAdornment>,\n          }}\n          onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n            setLatestValue(event.target.value)\n          }\n          value={latestValue}\n          variant=\"outlined\"\n        />\n      );\n    }\n\n    return (\n      <div className={styles.editEndingBalance}>\n        {input}\n        <Button\n          className={styles.saveButton}\n          onClick={() => onSave(record.gift_card_id)}\n          variant=\"outlined\"\n        >\n          Save 储存\n        </Button>\n      </div>\n    );\n  };\n\n  const fields = [\n    {\n      name: 'seller_gift_card_id',\n      displayName: 'Voucher Code\\n礼品券号码',\n      sortable: true,\n    },\n    {\n      name: 'email',\n      displayName: 'Email\\n电子邮件',\n      sortable: true,\n      thClassName: 'table-email-header',\n      tdClassName: 'table-email-container',\n    },\n    {\n      name: 'original_value',\n      displayName: 'Original Amount\\n购买金额',\n      sortable: true,\n      render: ({ value }: FTRenderProps) => formatCentsAmount(value),\n    },\n    {\n      name: 'created_at',\n      displayName: 'Date Purchased\\n购买日期',\n      sortable: true,\n      render: ({ value }: FTRenderProps) => renderDate(value),\n    },\n    {\n      name: 'last_updated',\n      displayName: 'Date Last Used\\n上次使用日期',\n      sortable: true,\n      render: ({ record, value }: FTRenderProps) => {\n        if (hasBeenUsed(record)) {\n          return renderDate(value);\n        } else if (showPrintView) {\n          return <div className={styles.greyBox} />;\n        }\n        return 'N/A';\n      },\n    },\n    {\n      name: 'latest_value',\n      displayName: 'Ending Balance\\n结余',\n      sortable: true,\n      render: renderLatestValue,\n      thClassName: styles.endingBalance,\n    },\n  ];\n\n  return (\n    <FilterableTable\n      bottomPagerVisible={!showPrintView}\n      className={styles.tableContainer}\n      data={giftCards}\n      fields={fields}\n      headerVisible={false} // Don't show the filter header.\n      initialSort=\"seller_gift_card_id\"\n      namespace=\"Vouchers\"\n      noFilteredRecordsMessage=\"No vouchers found for filter\"\n      noRecordsMessage=\"No vouchers in our system yet!\"\n      pageSizes={null} // Don't show the page size chooser.\n      recordCountName=\"Voucher Found\"\n      recordCountNamePlural=\"Vouchers Found\"\n      ref={tableRef}\n      topPagerVisible={false}\n    />\n  );\n};\n\n/**\n * Filterable Table Props\n *\n * From the react-filterable-table documentation\n */\nexport interface FTRenderProps {\n  /**\n   * The same field object that this render function was passed into.\n   * We'll have access to any props on it, including that 'someRandomProp' one we put on there.\n   * Those can be functions, too, so we can add custom onClick handlers to our return value.\n   */\n  field: any;\n  /**\n   * The data record for the whole row.\n   */\n  record: GiftCardDetails;\n  /**\n   * Value of the field in the data.\n   */\n  value: any;\n}\n\nexport default VoucherTable;\n","import classNames from 'classnames';\nimport moment from 'moment';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport Button from '@material-ui/core/Button';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport InputBase from '@material-ui/core/InputBase';\nimport PrintIcon from '@material-ui/icons/Print';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport SearchIcon from '@material-ui/icons/Search';\n\nimport { SuccessfulSaveBanner, SaveErrorBanner } from './Banners';\nimport type { ErrorTypeValues } from './Banners';\nimport VoucherTable from './VoucherTable';\nimport { formatCentsAmount } from './utils';\nimport Loader from '../../components/Loader/Loader';\nimport type { GiftCardDetails } from '../../utilities/api/types';\n\nimport styles from './styles.module.scss';\n\ninterface Props {\n  fetchData: () => Promise<void>;\n  giftCards: GiftCardDetails[];\n  handlePrint: () => Promise<void>;\n  organizationName: string;\n  showPrintView: boolean;\n}\n\nconst LoadingButton = ({\n  icon,\n  onClick,\n  text,\n}: {\n  icon: React.FunctionComponent;\n  onClick: () => Promise<void>;\n  text: string;\n}) => {\n  const [loading, setLoading] = useState<boolean>(false);\n\n  const click = useCallback(async () => {\n    setLoading(true);\n\n    // onClick handler is passed in from merchant dashboard parent\n    // component. It handles the error async state.\n    try {\n      await onClick();\n    } finally {\n      setLoading(false);\n    }\n  }, [onClick]);\n\n  const Icon = icon;\n\n  return (\n    <Button className={styles.loadingButton} onClick={click} variant=\"outlined\">\n      <div className={styles.loadingButtonIcon}>\n        {loading ? <Loader size=\"24px\" /> : <Icon />}\n      </div>\n      <div className={styles.loadingText}>{text}</div>\n    </Button>\n  );\n};\n\nconst StatsSection = ({\n  subtitle,\n  title,\n}: {\n  subtitle: string;\n  title: string;\n}) => (\n  <div>\n    <div className={styles.statsTitle}>{title}</div>\n    <div className={styles.statsSubtitle}>{subtitle}</div>\n  </div>\n);\n\nconst VoucherDashboard = ({\n  fetchData,\n  giftCards,\n  handlePrint,\n  organizationName,\n  showPrintView,\n}: Props) => {\n  const [searchFilter, setSearchFilter] = useState<string>('');\n  const [filterGam, setFilterGam] = useState<boolean>(false);\n\n  const [showSuccessBanner, setShowSuccessBanner] = useState<boolean>(false);\n  const [errorType, setErrorType] = useState<ErrorTypeValues | null>(null);\n\n  useEffect(() => {\n    if (showSuccessBanner) {\n      // Close success banner after 15 sec.\n      setTimeout(() => setShowSuccessBanner(false), 15000);\n    }\n  }, [showSuccessBanner]);\n\n  const stats = useMemo(\n    () => [\n      {\n        subtitle: String(\n          giftCards.filter((card) => card.latest_value > 0).length\n        ),\n        title: '# Active Vouchers  可使用的礼品券数量',\n      },\n      {\n        subtitle: formatCentsAmount(\n          giftCards.reduce((total, curr) => total + curr.latest_value, 0)\n        ),\n        title: 'Total Balance  总结余',\n      },\n      {\n        subtitle: moment().format('YYYY-MM-DD, h:mm A'),\n        title: 'Last Updated 上次更新时间',\n      },\n    ],\n    [giftCards]\n  );\n\n  const filteredGiftCards = useMemo(() => {\n    if (!searchFilter && !filterGam) {\n      return giftCards;\n    }\n\n    return giftCards.filter((giftCard: GiftCardDetails) => {\n      // If we're filtering by GAM and the gift card is single use (right now,\n      // only GAM has single use gift cards), filter this gift card out.\n      if (filterGam && giftCard.single_use) {\n        return false;\n      }\n\n      // If there is text in the search box, filter gift cards by filterable\n      // fields.\n      if (searchFilter) {\n        const filterableFields = ['email', 'seller_gift_card_id'];\n        const lowercaseSearch = searchFilter.toLowerCase();\n\n        for (let i = 0; i < filterableFields.length; i++) {\n          if (\n            giftCard[filterableFields[i]]\n              .toLowerCase()\n              .indexOf(lowercaseSearch) !== -1\n          ) {\n            return true;\n          }\n        }\n        return false;\n      }\n\n      return true;\n    });\n  }, [filterGam, giftCards, searchFilter]);\n\n  return (\n    <div>\n      <div className={styles.header}>\n        <div>\n          <div className={styles.headerTitle}>Voucher Tracker 礼品券记录</div>\n          <div className={styles.headerSubtitle}>{organizationName}</div>\n        </div>\n        {!showPrintView && (\n          <div className={styles.actionButtons}>\n            <LoadingButton\n              icon={RefreshIcon}\n              onClick={fetchData}\n              text=\"Refresh 刷新\"\n            />\n            <LoadingButton\n              icon={PrintIcon}\n              onClick={handlePrint}\n              text=\"Print 打印\"\n            />\n          </div>\n        )}\n      </div>\n      <div className={styles.stats}>\n        {stats.map((section) => (\n          <StatsSection key={section.title} {...section} />\n        ))}\n      </div>\n      {showSuccessBanner && <SuccessfulSaveBanner />}\n      {errorType && <SaveErrorBanner errorType={errorType} />}\n      <div className={styles.contentContainer}>\n        {!showPrintView && (\n          <div className={styles.filterSection}>\n            <div className={styles.searchBar}>\n              <div className={styles.searchIcon}>\n                <SearchIcon />\n              </div>\n              <InputBase\n                className={styles.searchText}\n                inputProps={{ 'aria-label': 'search' }}\n                onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n                  setSearchFilter(event.target.value)\n                }\n                placeholder=\"Search by Voucher Code or Email Address 使用礼品券号码或电子邮件搜寻\"\n              />\n            </div>\n            <div className={styles.filterGamContainer}>\n              <Checkbox\n                checked={filterGam}\n                className={styles.checkbox}\n                classes={{\n                  checked: filterGam ? styles.filterGamSelected : '',\n                  colorSecondary: filterGam ? styles.filterGamSelected : '',\n                }}\n                onChange={(event: React.ChangeEvent<HTMLInputElement>) =>\n                  setFilterGam(event.target.checked)\n                }\n              />\n              <div\n                className={classNames({\n                  [styles.filterGamText]: true,\n                  [styles.filterGamSelected]: filterGam,\n                })}\n              >\n                Hide gift-a-meal vouchers\n                <br />\n                隐藏爱心餐餐券\n              </div>\n            </div>\n          </div>\n        )}\n        <VoucherTable\n          fetchData={fetchData}\n          giftCards={filteredGiftCards}\n          setErrorType={setErrorType}\n          setShowSuccessBanner={setShowSuccessBanner}\n          showPrintView={showPrintView}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default VoucherDashboard;\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useReactToPrint } from 'react-to-print';\n\nimport VoucherDashboard from './VoucherDashboard';\nimport ErrorPage from '../../components/404Page';\nimport Loader from '../../components/Loader/Loader';\nimport {\n  getMerchantGiftCards,\n  getSeller,\n} from '../../utilities/api/interactionManager';\nimport type {\n  BrowsePageSeller,\n  GiftCardDetails,\n} from '../../utilities/api/types';\n\nconst MerchantVoucherDashboard = () => {\n  const [error, setError] = useState<boolean>(false);\n  const [pageLoading, setPageLoading] = useState<boolean>(true);\n\n  const [seller, setSeller] = useState<BrowsePageSeller | null>(null);\n  const [giftCards, setGiftCards] = useState<GiftCardDetails[]>([]);\n\n  const printRef = useRef(null);\n  const [showPrintView, setShowPrintView] = useState<boolean>(false);\n  const handlePrint = useReactToPrint({\n    content: () => printRef.current,\n    onAfterPrint: () => setShowPrintView(false),\n  });\n  const print = useCallback(async () => {\n    if (handlePrint) {\n      setShowPrintView(true);\n      handlePrint();\n    }\n  }, [handlePrint]);\n\n  const params = useHistory();\n  const urlParams = (params.location.pathname.match(\n    /\\/[^/]+/g\n  ) as string[]).map((param) => param.replace('/', ''));\n  const sellerId = urlParams[0];\n  const secretId = urlParams[2];\n\n  const fetchData = useCallback(async () => {\n    try {\n      const sellerResponse = await getSeller(sellerId);\n      const giftCardResponse = await getMerchantGiftCards(sellerId, secretId);\n\n      setSeller(sellerResponse.data);\n      setGiftCards(giftCardResponse.data);\n    } catch {\n      setError(true);\n    }\n  }, [sellerId, secretId]);\n\n  const onPageLoad = useCallback(async () => {\n    try {\n      await fetchData();\n    } finally {\n      setPageLoading(false);\n    }\n  }, [fetchData]);\n\n  useEffect(() => {\n    onPageLoad();\n  }, [onPageLoad]);\n\n  if (pageLoading) {\n    return <Loader isPage={true} />;\n  } else if (error || !seller) {\n    return <ErrorPage menuOpen={false} />;\n  }\n\n  return (\n    <div ref={printRef}>\n      <VoucherDashboard\n        fetchData={fetchData}\n        giftCards={giftCards}\n        handlePrint={print}\n        organizationName={seller.name}\n        showPrintView={showPrintView}\n      />\n    </div>\n  );\n};\n\nexport default MerchantVoucherDashboard;\n"],"sourceRoot":""}