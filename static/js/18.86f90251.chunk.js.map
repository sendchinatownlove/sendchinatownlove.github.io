{"version":3,"sources":["pages/PassportRedemption/Assets/VoucherFront.png","pages/PassportRedemption/Assets/VoucherBack.png","pages/PassportRedemption/Voucher/index.tsx"],"names":["module","exports","Voucher","useParams","id","tickets_secret","location","useLocation","search","params","URLSearchParams","convertToInt","input","parseInt","convertToBool","page","get","items","printed","associated","useState","restaurantName","setRestaurantName","restaurantTickets","setRestaurantTickets","useEffect","a","getParticipatingMerchant","name","data","getParticipatingMerchantTickets","allTickets","getAllTickets","Page","map","restaurant","idx","Container","Image","src","VoucherImage","ContainerInfo","RestaurantName","className","length","TicketNumber","code","formattedCode","split","splice","join","formatTicketCode","ticket_id","BackImage","styled","div","img"],"mappings":"4GAAAA,EAAOC,QAAU,IAA0B,0C,oBCA3CD,EAAOC,QAAU,IAA0B,yC,yhDCyG5BC,UA5FC,WAAO,IAAD,EACWC,cAAvBC,EADY,EACZA,GAAIC,EADQ,EACRA,eACNC,EAAWC,cAAcC,OAC3BC,EAAS,IAAIC,gBAAgBJ,GAE3BK,EAAe,SAACC,GACpB,OAAc,OAAVA,EACK,KAEGC,SAASD,EAAO,KAIxBE,EAAgB,SAACF,GACrB,MAAc,SAAVA,GAGU,UAAVA,GAGG,MAGHG,EAAOJ,EAAaF,EAAOO,IAAI,SAC/BC,EAAQN,EAAaF,EAAOO,IAAI,UAChCE,EAAUJ,EAAcL,EAAOO,IAAI,YACnCG,EAAaL,EAAcL,EAAOO,IAAI,eA1BxB,EA4BwBI,mBAAS,IA5BjC,mBA4BbC,EA5Ba,KA4BGC,EA5BH,OA6B8BF,qBA7B9B,mBA6BbG,EA7Ba,KA6BMC,EA7BN,KA+BpBC,qBAAU,YACW,uCAAG,kCAAAC,EAAA,sEAGVC,YAAyBvB,GAHf,uBAEVwB,EAFU,EAElBC,KAAQD,KAFU,SAIeE,YACjC1B,EACAC,EACAU,EACAE,EACAC,EACAC,GAVkB,iBAINY,EAJM,EAIZF,OASUD,IAChBN,EAAkBM,GAClBJ,EAAqBO,IAfH,2CAAH,qDAkBnBC,KACC,CAAC5B,EAAIE,EAAUD,EAAgBc,EAAYF,EAAOF,EAAMG,IAQ3D,OAAOK,EACL,kBAACU,EAAD,KACGV,EAAkBW,KAAI,SAACC,EAAYC,GAAb,OACrB,oCACE,kBAACC,EAAD,KACE,kBAACC,EAAD,CAAOC,IAAKC,MACZ,kBAACC,EAAD,KACE,kBAACC,EAAD,CACEC,UAAWtB,EAAeuB,OAAS,GAAK,OAAS,IAEhDvB,GAEH,kBAACwB,EAAD,KAlBa,SAACC,GACxB,IAAMC,EAAgBD,EAAKE,MAAM,IAEjC,OADAD,EAAcE,OAAO,EAAG,EAAG,KACpBF,EAAcG,KAAK,IAgBbC,CAAiBhB,EAAWiB,eAIjChB,EAAM,GAAK,IAAM,GACjB,oCACE,kBAACE,EAAD,CAAOC,IAAKc,MACZ,kBAACf,EAAD,CAAOC,IAAKc,MACZ,kBAACf,EAAD,CAAOC,IAAKc,MACZ,kBAACf,EAAD,CAAOC,IAAKc,YAOtB,kBAAC,IAAD,OAMJ,IAAMpB,EAAOqB,IAAOC,IAAV,KAKJlB,EAAYiB,IAAOC,IAAV,KAOTjB,EAAQgB,IAAOE,IAAV,KAOLf,EAAgBa,IAAOC,IAAV,KASbb,EAAiBY,IAAOC,IAAV,KA6BdV,EAAeS,IAAOC,IAAV","file":"static/js/18.86f90251.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/VoucherFront.17e749a1.png\";","module.exports = __webpack_public_path__ + \"static/media/VoucherBack.53dab2f2.png\";","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { useParams, useLocation } from 'react-router-dom';\n\nimport {\n  getParticipatingMerchant,\n  getParticipatingMerchantTickets,\n} from '../../../utilities/api/interactionManager';\nimport { LoaderFillerContainer } from '../../../components/Loader';\n\nimport VoucherImage from '../Assets/VoucherFront.png';\nimport BackImage from '../Assets/VoucherBack.png';\n\nconst Voucher = () => {\n  const { id, tickets_secret } = useParams();\n  const location = useLocation().search;\n  let params = new URLSearchParams(location);\n\n  const convertToInt = (input: string | null) => {\n    if (input === null) {\n      return null;\n    }\n    const num = parseInt(input, 10);\n    return num;\n  };\n\n  const convertToBool = (input: string | null) => {\n    if (input === 'true') {\n      return true;\n    }\n    if (input === 'false') {\n      return false;\n    }\n    return null;\n  };\n\n  const page = convertToInt(params.get('page'));\n  const items = convertToInt(params.get('items'));\n  const printed = convertToBool(params.get('printed'));\n  const associated = convertToBool(params.get('associated'));\n\n  const [restaurantName, setRestaurantName] = useState('');\n  const [restaurantTickets, setRestaurantTickets] = useState<any | null>();\n\n  useEffect(() => {\n    const getAllTickets = async () => {\n      const {\n        data: { name },\n      } = await getParticipatingMerchant(id);\n      const { data: allTickets } = await getParticipatingMerchantTickets(\n        id,\n        tickets_secret,\n        page,\n        items,\n        printed,\n        associated\n      );\n\n      if (allTickets && name) {\n        setRestaurantName(name);\n        setRestaurantTickets(allTickets);\n      }\n    };\n    getAllTickets();\n  }, [id, location, tickets_secret, associated, items, page, printed]);\n\n  const formatTicketCode = (code) => {\n    const formattedCode = code.split('');\n    formattedCode.splice(3, 0, '-');\n    return formattedCode.join('');\n  };\n\n  return restaurantTickets ? (\n    <Page>\n      {restaurantTickets.map((restaurant, idx) => (\n        <>\n          <Container>\n            <Image src={VoucherImage} />\n            <ContainerInfo>\n              <RestaurantName\n                className={restaurantName.length > 15 ? 'long' : ''}\n              >\n                {restaurantName}\n              </RestaurantName>\n              <TicketNumber>\n                {formatTicketCode(restaurant.ticket_id)}\n              </TicketNumber>\n            </ContainerInfo>\n          </Container>\n          {(idx + 1) % 4 === 0 && (\n            <>\n              <Image src={BackImage} />\n              <Image src={BackImage} />\n              <Image src={BackImage} />\n              <Image src={BackImage} />\n            </>\n          )}\n        </>\n      ))}\n    </Page>\n  ) : (\n    <LoaderFillerContainer />\n  );\n};\n\nexport default Voucher;\n\nconst Page = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`;\n\nconst Container = styled.div`\n  height: 599px;\n  width: 775px;\n  display: grid;\n  grid-template-rows: 1fr;\n`;\n\nconst Image = styled.img`\n  height: 599px;\n  width: 775px;\n  grid-row: 1;\n  grid-column: 1;\n`;\n\nconst ContainerInfo = styled.div`\n  grid-row: 1;\n  grid-column: 1;\n  height: 599px;\n  width: 775px;\n  display: flex;\n  z-index: 5;\n`;\n\nconst RestaurantName = styled.div`\n  font-family: 'Nova Mono';\n  text-transform: uppercase;\n  color: #bc4f5e;\n\n  transform: rotate(15deg);\n  -webkit-transform: rotate(15deg);\n  -moz-transform: rotate(15deg);\n  -ms-transform: rotate(15deg);\n  -o-transform: rotate(15deg);\n\n  margin-top: 317px;\n  margin-left: 100px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n\n  width: 150px;\n  height: 25px;\n  padding: 0;\n\n  &.long {\n    margin-top: 312px;\n    font-size: 12px;\n    height: 35px;\n  }\n`;\n\nconst TicketNumber = styled.div`\n  color: #a8192e;\n  font-weight: bold;\n  font-style: italic;\n  font-size: 50px;\n  margin: 160px 0 0 210px;\n\n  width: 285px;\n  text-align: center;\n`;\n"],"sourceRoot":""}